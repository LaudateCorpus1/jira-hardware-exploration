<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JPT timeline chart</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.13.0/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.bundle.min.js"></script>
    <style>
        span.commit-flag {
            padding: 3px;
            background: teal;
            font-family: monospace;
            color: white;
        }
    </style>
</head>
<body>
<span class="commit-flag">
    Generated from
    <a href="https://github.com/atlassian/jira-hardware-exploration/commit/<%= commit =%>"><%= commit =%></a>
</span>
<canvas id="apdex-chart"></canvas>
<canvas id="error-rate-chart"></canvas>
<script>
    new Chart(
        document.getElementById("apdex-chart").getContext("2d"),
        {
            type: 'bar',
            data: '<%= apdexChartData =%>',
            options: {
                responsive: true,
                hoverMode: 'index',
                stacked: false,
                title: {
                    display: true,
                    text: '<%= application =%> hardware exploration: Apdex'
                },
                scales: {
                    yAxes: [
                        {
                            type: "linear",
                            display: true,
                            position: "left",
                            scaleLabel: {
                                display: true,
                                labelString: "Apdex"
                            },
                            id: "apdex-axis",
                            ticks: {
                                min: 0
                            }
                        }
                    ],
                    xAxes: [
                        {
                            scaleLabel: {
                                display: true,
                                labelString: "Jira nodes"
                            }
                        }
                    ]
                }
            }
        }
    );
</script>
<script>
    new Chart(
        document.getElementById("error-rate-chart").getContext("2d"),
        {
            type: 'bar',
            data: '<%= errorRateChartData =%>',
            options: {
                responsive: true,
                hoverMode: 'index',
                stacked: false,
                title: {
                    display: true,
                    text: '<%= application =%> hardware exploration: error rate'
                },
                scales: {
                    yAxes: [
                        {
                            type: "linear",
                            display: true,
                            position: "right",
                            id: "error-rate-axis",
                            scaleLabel: {
                                display: true,
                                labelString: "error rate [%]"
                            },
                            ticks: {
                                min: 0
                            },
                            gridLines: {
                                drawOnChartArea: false
                            }
                        }
                    ],
                    xAxes: [
                        {
                            scaleLabel: {
                                display: true,
                                labelString: "Jira nodes"
                            }
                        }
                    ]
                }
            }
        }
    );
</script>
</body>
</html>